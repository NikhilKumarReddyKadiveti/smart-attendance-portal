<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Smart Attendance</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/animations.css">
</head>
<body style="justify-content: center; align-items: center;">

    <div class="glass-panel fade-in" style="width: 100%; max-width: 400px; text-align: center;">
        <h2 class="text-gradient">Smart Portal</h2>
        <p style="color: var(--text-muted); margin-bottom: 20px;">Login to your account</p>
        
        <form id="loginForm">
            <input type="email" id="email" placeholder="Email Address" required>
            <input type="password" id="password" placeholder="Password" required>
            <button type="submit" class="btn" style="width: 100%; margin-top: 10px;">Login</button>
        </form>
        <div id="msg" class="alert" style="margin-top: 15px;"></div>
    </div>

    <script src="assets/js/main.js"></script>
    <script>
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const msg = document.getElementById('msg');

            try {
                const data = await apiCall('/auth', 'POST', { email, password });
                localStorage.setItem('user', JSON.stringify(data));
                
                // Role Based Redirect
                if (data.role === 'admin') window.location.href = '/admin/dashboard.html';
                else if (data.role === 'faculty') window.location.href = '/faculty/dashboard.html';
                else window.location.href = '/student/dashboard.html';

            } catch (err) {
                msg.textContent = err.message;
                msg.classList.add('alert-error');
                msg.style.display = 'block';
            }
        });
    </script>
</body>
</html>
